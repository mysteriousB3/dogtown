#pragma checksum "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "e0da69e37835482193fd42658896373a17922e6f"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_SellerFeedback2_ReviewSeller), @"mvc.1.0.view", @"/Views/SellerFeedback2/ReviewSeller.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\parin\web\dog7\Views\_ViewImports.cshtml"
using dog7;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\parin\web\dog7\Views\_ViewImports.cshtml"
using dog7.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
using dog7.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
using System.Linq;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"e0da69e37835482193fd42658896373a17922e6f", @"/Views/SellerFeedback2/ReviewSeller.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8d672f4c3101ed6d56c1976fdf1f3387578e7bea", @"/Views/_ViewImports.cshtml")]
    public class Views_SellerFeedback2_ReviewSeller : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"
<div id='app1' v-cloak>
    <nav aria-label=""breadcrumb"">
        <ol class=""breadcrumb breadcrumb-arrow"">
            <li class=""breadcrumb-item active"" aria-current=""page"">รีวิวทั้งหมด ของ {{farmName}}</li>
        </ol>
    </nav>   

    <v-app>
        <v-main>
            <v-card>
                <v-card-text>
                    <div class=""h2 grey--text"" style=""text-align:center"">เขียนรีวิว</div><br>
                    <div>
                        <v-row>
                            <v-col cols=""4"">
                                <div class=""h6 grey--text"">จำนวนดาวที่จะให้</div>
                                <v-radio-group v-model=""toReview.feedbackStar"" mandatory>
                                    <v-radio value=""1"">
                                        <template v-slot:label>
                                            <strong class=""dark--text""><v-icon>mdi-star</v-icon></strong>
                                        </template>
                                    ");
            WriteLiteral(@"</v-radio>
                                    <v-radio value=""2"">
                                    <template v-slot:label>
                                        <strong class=""dark--text""><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon></strong>
                                        </template>
                                    </v-radio>
                                    <v-radio value=""3"">
                                    <template v-slot:label>
                                        <strong class=""dark--text""><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon></strong>
                                        </template>
                                    </v-radio>
                                    <v-radio value=""4"">
                                    <template v-slot:label>
                                        <strong class=""dark--text""><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon></strong");
            WriteLiteral(@">
                                        </template>
                                    </v-radio>
                                    <v-radio value=""5"">
                                    <template v-slot:label>
                                        <strong class=""dark--text""><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon><v-icon>mdi-star</v-icon></strong>
                                        </template>
                                    </v-radio>
                                </v-radio-group>
                            </v-col>
                            <v-col cols=""6"">
                                <div class=""h6 grey--text"">เขียนข้อความรีวิว</div>
                                <v-textarea v-model=""toReview.feedbackDescription""></v-textarea>
                            </v-col>
                        </v-row>
                        <v-row>
");
#nullable restore
#line 58 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                             if (signInManager.IsSignedIn(User)){
                                var user = userManager.GetUserAsync(User).Result;
                                //check to not allow sellers review themselves
                                int getIsShop = user.isSeller;
                                var sellerId = (Json.Serialize(@ViewBag.sellerId)).ToString();
                                sellerId = int.Parse(sellerId);
                                if(getIsShop != sellerId){

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <button ");
            WriteLiteral("@click=\"addReview(");
#nullable restore
#line 65 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                                                          Write(user.Id);

#line default
#line hidden
#nullable disable
            WriteLiteral(",");
#nullable restore
#line 65 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                                                                   Write(sellerId);

#line default
#line hidden
#nullable disable
            WriteLiteral(")\" class=\"btn btn-block btn-primary\">\r\n                                        ส่งรีวิว\r\n                                    </button>\r\n");
#nullable restore
#line 68 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                                }//econ
                                else{

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <button ");
            WriteLiteral("@click=\"selfReview\" class=\"btn btn-block btn-primary\">\r\n                                        ส่งรีวิว\r\n                                    </button>\r\n");
#nullable restore
#line 73 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                                }//econ
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 75 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                             if(!signInManager.IsSignedIn(User)){

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <button ");
            WriteLiteral("@click=\"goLogin\" class=\"btn btn-block btn-primary\">\r\n                                    ส่งรีวิว\r\n                                </button>\r\n");
#nullable restore
#line 79 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                            }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                            
                        </v-row>
                    </div>
                </v-card-text>
            </v-card>
            <br><br>
            			<v-text-field
                    v-model=""search""
                    append-icon=""mdi-magnify""
                    label=""Search""
                    single-line
                    hide-details
                ></v-text-field>
             <v-data-table
			 :search = 'search'
             :headers ='headers'
             :items   ='theSellerFeedbacks'
             :footer-props=""{ 'items-per-page-options': [25, 50,100] }""
             :items-per-page=""25""
              class='elevation-1'
             />
                  <template v-slot:item.actions='{item}'>
");
#nullable restore
#line 108 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                         if(signInManager.IsSignedIn(User)){
                       var user = userManager.GetUserAsync(User).Result;
                       var role = userManager.GetRolesAsync(user).Result[0];
                            if(role=="admin"){

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <v-btn small class=\"white--text\"color=\"red darken-1\"\r\n                                ");
            WriteLiteral("@click=\"remove_sellerfeedback(item)\"\r\n                                >\r\n                                    <v-icon>mdi-trash-can</v-icon>\r\n                                </v-btn>\r\n");
#nullable restore
#line 117 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                            }//econ
                       }

#line default
#line hidden
#nullable disable
            WriteLiteral("                  </template>\r\n             </v-data-table>\r\n             \r\n        </v-main>\r\n    </v-app>\r\n</div>\r\n");
            DefineSection("scripts", async() => {
                WriteLiteral(@"
    <script>
        var app;
            var component = {
                vuetify: new Vuetify(theme())
                ,
                el:'#app1'
                ,
                data:{
                   search :'',
                   theSellerFeedbacks:[],
                   headers:[
                      {text:'คนรีวิว',value:'user',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'เวลาที่รีวิว',value:'feedbackDateTime',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'จำนวนดาวที่ให้',value:'feedbackStar',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'บทความรีวิว',value:'feedbackDescription',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'actions',value:'actions',align:'left',sortable:true,class: 'white--text blue darken-2'}

					],
                   sellerId:0,
                   farmName:"""",
        ");
                WriteLiteral("           toReview:{feedbackStar:0},\r\n                   adm:\"\",\r\n                }//edata\r\n                ,\r\n                created(){\r\n                    \r\n                  this.theSellerFeedbacks = ");
#nullable restore
#line 152 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                                       Write(Html.Raw(Json.Serialize(@ViewBag.theSellerFeedbacks)));

#line default
#line hidden
#nullable disable
                WriteLiteral(";\r\n                  this.sellerId = ");
#nullable restore
#line 153 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                             Write(Html.Raw(Json.Serialize(@ViewBag.sellerId)));

#line default
#line hidden
#nullable disable
                WriteLiteral(";\r\n                  this.farmName = ");
#nullable restore
#line 154 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                             Write(Html.Raw(Json.Serialize(@ViewBag.farmName)));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";
                  var nameOfMonth = ['มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน', 'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤษจิกายน', 'ธันวาคม'];
                  for (var i = 0; i < this.theSellerFeedbacks.length; i++) {
                        var date = this.theSellerFeedbacks[i].feedbackDateTime.slice(8, 10);
                        var month = this.theSellerFeedbacks[i].feedbackDateTime.slice(5, 7);
                        var monthName = nameOfMonth[parseInt(month) - 1]
                        var year = parseInt(this.theSellerFeedbacks[i].feedbackDateTime.slice(0, 4)) + 543;
                        var time = this.theSellerFeedbacks[i].feedbackDateTime.slice(11, 16);
                        this.theSellerFeedbacks[i].feedbackDateTime =date +"" ""+monthName +"" ""+ year;
                    }//eloop
                this.adm = ");
#nullable restore
#line 164 "C:\Users\parin\web\dog7\Views\SellerFeedback2\ReviewSeller.cshtml"
                      Write(Html.Raw(Json.Serialize(@ViewBag.adm)));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";
                console.log(typeof this.adm)
                if(this.adm != ""1""){
                    this.headers=[
                      {text:'คนรีวิว',value:'user',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'เวลาที่รีวิว',value:'feedbackDateTime',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'จำนวนดาวที่ให้',value:'feedbackStar',align:'left',sortable:true,class: 'white--text blue darken-2'},
                      {text:'บทความรีวิว',value:'feedbackDescription',align:'left',sortable:true,class: 'white--text blue darken-2'}
					]//eheaders
                }//econ
                
                  console.log(this.theSellerFeedbacks);
                  console.log(this.sellerId);
                }//ecreated
                ,
                methods:{
                    remove_sellerfeedback(item){
                          if (confirm(""To proceed, please click OK"")) {
                        ");
                WriteLiteral(@"      var id = item.sellerFeedbackId;
                              $.post( ""/sellerfeedback/delete/""+item.sellerFeedbackId)
                              .done((res)=> {
                                  if(res.error == -1){
                                      alert(""ลบรีวิวเรียบร้อย"")
                                      location.reload();
                                  }//endif

                              })
                              .fail(function(res) {
                                  alert( res.msg);
                              });
                          } //end if 
                    }//ef
                    ,
                    goLogin(){
                        alert(""กรุณาเข้าสู่ระบบก่อน"")
                    }//ef
                    ,
                    selfReview(){
                        alert(""ไม่สามารถรีวิวร้านของตัวเองได้"")
                    }//ef
                    ,
                    addReview(userId,sellerId){
                        th");
                WriteLiteral(@"is.toReview.userId = userId;
                        this.toReview.sellerId = sellerId;
                        console.log(this.toReview);
                        $.post(""/SellerFeedback2/add"",this.toReview).done(res=>{
                            if(res.error == -1){
                                alert(""เขียนรีวิวเรียบร้อย"")
                                location.reload();
                            }//econ
                            else{
                                alert(res.exception)
                            }//econ
                        })//epost
                    }//ef

                }//emethods
                ,
                computed:{

                }//ecomputed
            };
            app = new Vue(component);


    </script>

");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public dog7DbContext _context { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public UserManager<AppUser> userManager { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public SignInManager<AppUser> signInManager { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
